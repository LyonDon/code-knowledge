## Redis是什么

并不是简单的持久化key-value存储的存储器。而是涉及到五种数据结构。只有一种是键值对的结构，通过这些实现数据的告诉存取的存储方式

*注意：redis不是一种普遍使用的存储概念，只适用于部分情况*

### 数据库

redis中也有数据库的概念，不同于传统意义上的数据库，redis数据库使用数字来为数据库编号，默认数据库编号为0，通过select语句能实现数据库的切换，如select1：切换到1号数据库。

### 命令，关键字和值（command，key and value）

*	key：用来标识数据块的一段字符串
*	value：关键字的实际值，redis并不关心它到底是什么

key和value是redis的最基本的概念

*key是redis的一切，value什么都不是（也可以理解为可以是任何东西），redis不能通过值来查询*  

### 查询

### 存储器和持久化

redis是一种持久化的存储器内存储，会将所有数据存储在存储器中，并每隔一段时间到磁盘中建立数据库的快照（snapshot）；除此之外，redis还可以运行在附加模式。即单一关键字的改变，redis可能会在磁盘中进行append-only操作

### 小结

*	redis是一种超快速的存取方式，（毕竟所有数据都在存储器中），一般可以实现每秒数万到数十万次的操作  

*	使用redis时，不同于sql程序尽量避免与数据库的频繁交互（为了节省时间），与redis服务器的频繁交互显得微不足道，相比起redis结构节省的时间来说

***

## 数据结构(5种)

### 字符串
~~~
get
set
del
strlen
getrange
……
~~~

字符串最常用的案例是存储对象和计数，由于通过关键字获取值的速度很快，所以字符串常被用来缓存数据

### 散列（Hashes）
~~~
hget
hset
hdel
hkeys
hgetall
……
~~~

散列数据结构和字符串数据结构比较相似，但是多了一个域，关键字为hget，hset
若是同时添加获取多个域；关键字为hmget，hmset

相比于字符串，散列可以更为细致的对用户进行操作，而不只是序列化一个对象。例如，可以添加，更新删除部分用户片段

*注意：Hashes和字符串两者之间的关键字是不通用的，比如set建立的对象，无法用hget来获取*

### 列表
~~~
lpush
ltrim
……
~~~
ltrim的具体构成是LTRIM Key start stop，即建立一个从start到stop长度的列表

*因为这里的key保存的是一个列表，理论上列表可以保存任意个值，这里就是将start到stop之外的值全部删除*

列表可以用来存储用户日志，过往活动等

### 集合
~~~
sadd
sismember
~~~
集合一般用来保存没有重复元素的数据，同时也提供了并集等相关操作

*	对集合进行操作的场合
*	需要对数据进行跟踪和标记的场合

### 分类集合
~~~
zadd
zcount
zrevrank
zrank
~~~

相比于普通集合数据结构，增加了标记（score）的概念，标记提供了排序和秩划分的功能

主要用于一些基于整数排序，且能以标记（score）来进行操作的